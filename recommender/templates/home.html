{% extends "base.html" %}
{% load recommends %}

{% block content %}

<div class="container">
  {% if request.user.is_authenticated %}
  {% suggested as suggestions limit 4  %}
  {% if suggestions %}
  <div class="row"> <div class="col-md-12">
      <br>
      <b><h2>Recommended For You</h2><br/>
        <div class="row">
          <div class="col-md-12">
            {% for suggested in suggestions %}
            {% if forloop.counter0|divisibleby:4 %} <div class="row"> {% endif %}
              <div class="col-md-3">
                {% include 'partials/video_game_small.html' with video_game=suggested.object %}
              </div>
              {% if forloop.counter|divisibleby:4 %} </div> {% endif %}
            {% endfor %}
          </div>
        </div>
    </div>
  </div>
  {% endif %}
  {% endif %}

  <div class="row">
    <div class="col-md-12">
      <h2>Popular Titles</h2>
        <div class="row">
          <div class="col-md-12">
            {% for video_game in popular_titles %}
            {% if forloop.counter0|divisibleby:4 %} <div class="row"> {% endif %}
              <div class="col-md-3">
                {% include 'partials/video_game_small.html' with video_game=video_game %}
              </div>
              {% if forloop.counter|divisibleby:4 %} </div> {% endif %}
            {% endfor %}
          </div>
        </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <h2>Random Titles</h2>
        <div class="row">
          <div class="col-md-12">
            {% for video_game in random_titles %}
            {% if forloop.counter0|divisibleby:4 %} <div class="row"> {% endif %}
              <div class="col-md-3">
                {% include 'partials/video_game_small.html' with video_game=video_game %}
              </div>
              {% if forloop.counter|divisibleby:4 %} </div> {% endif %}
            {% endfor %}
          </div>
        </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <h2>New Titles</h2>
        <div class="row">
          <div class="col-md-12">
            {% for v in new_titles %}
            {% if forloop.counter0|divisibleby:4 %} <div class="row"> {% endif %}
              <div class="col-md-3">
                {% include 'partials/video_game_small.html' with video_game=v %}
              </div>
              {% if forloop.counter|divisibleby:4 %} </div> {% endif %}
            {% endfor %}
          </div>
        </div>
    </div>
  </div>

</div>

{% endblock %}
